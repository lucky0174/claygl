export default "@export qtek.particle.vertex\r\n\r\nuniform mat4 worldView : WORLDVIEW;\r\nuniform mat4 projection : PROJECTION;\r\n\r\nattribute vec3 position : POSITION;\r\nattribute vec3 normal : NORMAL;\r\n\r\n#ifdef UV_ANIMATION\r\nattribute vec2 texcoord0 : TEXCOORD_0;\r\nattribute vec2 texcoord1 : TEXCOORD_1;\r\n\r\nvarying vec2 v_Uv0;\r\nvarying vec2 v_Uv1;\r\n#endif\r\n\r\nvarying float v_Age;\r\n\r\nvoid main() {\r\n    v_Age = normal.x;\r\n    float rotation = normal.y;\r\n\r\n    vec4 worldViewPosition = worldView * vec4(position, 1.0);\r\n    gl_Position = projection * worldViewPosition;\r\n    float w = gl_Position.w;\r\n    // TODO\r\n    gl_PointSize = normal.z * projection[0].x / w;\r\n\r\n    #ifdef UV_ANIMATION\r\n        v_Uv0 = texcoord0;\r\n        v_Uv1 = texcoord1;\r\n    #endif\r\n}\r\n\r\n@end\r\n\r\n@export qtek.particle.fragment\r\n\r\nuniform sampler2D sprite;\r\nuniform sampler2D gradient;\r\nuniform vec3 color : [1.0, 1.0, 1.0];\r\nuniform float alpha : 1.0;\r\n\r\nvarying float v_Age;\r\n\r\n#ifdef UV_ANIMATION\r\nvarying vec2 v_Uv0;\r\nvarying vec2 v_Uv1;\r\n#endif\r\n\r\nvoid main() {\r\n    vec4 color = vec4(color, alpha);\r\n    #ifdef SPRITE_ENABLED\r\n        #ifdef UV_ANIMATION\r\n            color *= texture2D(sprite, mix(v_Uv0, v_Uv1, gl_PointCoord));\r\n        #else\r\n            color *= texture2D(sprite, gl_PointCoord);\r\n        #endif\r\n    #endif\r\n    #ifdef GRADIENT_ENABLED\r\n        color *= texture2D(gradient, vec2(v_Age, 0.5));\r\n    #endif\r\n    gl_FragColor = color;\r\n}\r\n\r\n@end";
