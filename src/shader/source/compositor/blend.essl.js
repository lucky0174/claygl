define(function () {
return "@export buildin.compositor.blend\n// Blend at most 4 textures\n#ifdef TEXTURE1_ENABLED\nuniform sampler2D texture1;\nuniform float weight1 : 1.0;\n#endif\n#ifdef TEXTURE2_ENABLED\nuniform sampler2D texture2;\nuniform float weight2 : 1.0;\n#endif\n#ifdef TEXTURE3_ENABLED\nuniform sampler2D texture3;\nuniform float weight3 : 1.0;\n#endif\n#ifdef TEXTURE4_ENABLED\nuniform sampler2D texture4;\nuniform float weight4 : 1.0;\n#endif\n\nvarying vec2 v_Texcoord;\n\nvoid main()\n{\n    vec3 tex = vec3(0.0);\n#ifdef TEXTURE1_ENABLED\n    tex += texture2D(texture1, v_Texcoord).rgb * weight1;\n#endif\n#ifdef TEXTURE2_ENABLED\n    tex += texture2D(texture2, v_Texcoord).rgb * weight2;\n#endif\n#ifdef TEXTURE3_ENABLED\n    tex += texture2D(texture3, v_Texcoord).rgb * weight3;\n#endif\n#ifdef TEXTURE4_ENABLED\n    tex += texture2D(texture4, v_Texcoord).rgb * weight4;\n#endif\n\n    gl_FragColor = vec4(tex, 1.0);\n}\n@end";
});